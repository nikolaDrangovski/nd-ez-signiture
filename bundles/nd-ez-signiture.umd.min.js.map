{"version":3,"sources":["ng://nd-ez-signiture/src/app/modules/nd-ez-signiture/nd-ez-signiture.component.ts","ng://nd-ez-signiture/src/app/modules/nd-ez-signiture/nd-ez-signiture.module.ts"],"names":["NdEzSignitureComponent","renderer","this","EventEmitter","document","createElement","isEmptyCanvas","image","prototype","ngOnInit","ngAfterViewInit","canvasElement","canvas","nativeElement","setAttribute","width","height","ndContainer","blankCanvas","ngAfterContentInit","dataSigniture","emit","dataReturn","mouseUp","ev","mouseIsDown","ndGetDataSigniture","mouseDown","lastX","layerX","lastY","layerY","mouseMove","ctx","getContext","beginPath","moveTo","lineTo","closePath","strokeStyle","ndStrokeColor","lineWidth","ndLineWidth","stroke","mouseLeave","ndClearCanvas","clearRect","toDataURL","Component","args","selector","template","styles","Renderer2","ViewChild","Input","Output","NdEzSignitureModule","NgModule","imports","CommonModule","declarations","exports"],"mappings":"uUAAA,IAAAA,EAAA,WA8BE,SAAAA,EAAmBC,GAAAC,KAAAD,SAAAA,aAhBa,gBACC,uBACO,wBACF,qBACL,IAAIE,EAAAA,+BAKd,mBACJC,SAASC,cAAc,0BACxB,CAChBC,eAAe,EACfC,MAAO,aAKTP,EAAAQ,UAAAC,SAAA,aAGOT,EAAAQ,UAAAE,2BACLR,KAAKS,cAAgBT,KAAKU,OAAOC,cACjCX,KAAKD,SAASa,aAAaZ,KAAKS,cAAe,QAAST,KAAKa,MAAQ,MACrEb,KAAKD,SAASa,aAAaZ,KAAKS,cAAe,SAAUT,KAAKc,OAAS,MACvEd,KAAKD,SAASa,aAAaZ,KAAKe,YAAYJ,cAAe,QAAS,SAAWX,KAAKa,MAAQ,MAC5Fb,KAAKgB,YAAYF,OAASd,KAAKc,OAC/Bd,KAAKgB,YAAYH,MAAQb,KAAKa,OAGhCf,EAAAQ,UAAAW,mBAAA,WACEjB,KAAKkB,cAAcC,KAAKnB,KAAKoB,aAE/BtB,EAAAQ,UAAAe,QAAA,SAAQC,GACNtB,KAAKuB,aAAc,EACnBvB,KAAKwB,sBAEP1B,EAAAQ,UAAAmB,UAAA,SAAUH,GACRtB,KAAKuB,aAAc,EACnBvB,KAAK0B,MAAQJ,EAAGK,OAChB3B,KAAK4B,MAAQN,EAAGO,QAElB/B,EAAAQ,UAAAwB,UAAA,SAAUR,GACR,IAAIS,EAAM/B,KAAKS,cAAcuB,WAAW,MACpChC,KAAKuB,cACPQ,EAAIE,YACJF,EAAIG,OAAOlC,KAAK0B,MAAO1B,KAAK4B,OAC5BG,EAAII,OAAOb,EAAGK,OAAQL,EAAGO,QACzBE,EAAIK,YACJL,EAAIM,YAAcrC,KAAKsC,cACvBP,EAAIQ,UAAYvC,KAAKwC,YACrBT,EAAIU,SACJzC,KAAK0B,MAAQJ,EAAGK,OAChB3B,KAAK4B,MAAQN,EAAGO,SAGpB/B,EAAAQ,UAAAoC,WAAA,WACE1C,KAAKuB,aAAc,EACnBvB,KAAKwB,sBAEP1B,EAAAQ,UAAAqC,cAAA,WACE3C,KAAKS,cAAcuB,WAAW,MAAMY,UAAU,EAAG,EAAG5C,KAAKc,OAAQd,KAAKa,OACtEb,KAAKwB,sBAEP1B,EAAAQ,UAAAkB,mBAAA,WACExB,KAAKoB,WAAWhB,cAAgBJ,KAAKS,cAAcoC,aAAe7C,KAAKgB,YAAY6B,YACnF7C,KAAKoB,WAAWf,MAAQL,KAAKS,cAAcoC,YAC3C7C,KAAKkB,cAAcC,KAAKnB,KAAKoB,iCA/EhC0B,EAAAA,UAASC,KAAA,CAAC,CACTC,SAAU,kBACVC,SAAU,+RAIVC,OAAQ,CAAC,snBARiDC,EAAAA,6CAWzDC,EAAAA,UAASL,KAAA,CAAC,iCACVK,EAAAA,UAASL,KAAA,CAAC,8BAEVM,EAAAA,sBACAA,EAAAA,6BACAA,EAAAA,2BACAA,EAAAA,6BACAC,EAAAA,YAlBH,GCAAC,EAAA,oDAICC,EAAAA,SAAQT,KAAA,CAAC,CACRU,QAAS,CACPC,EAAAA,cAEFC,aAAc,CAAC7D,GACf8D,QAAS,CACP9D,SAVJ","sourcesContent":["import { Component, OnInit, EventEmitter, ViewChild, Input, Renderer2, Output } from '@angular/core';\n\n@Component({\n  selector: 'nd-ez-signiture',\n  template: `<div class='nd-container' #ndContainer>\n    <canvas class='nd-canvas' (mousedown)='mouseDown($event)' (mousemove)='mouseMove($event)' (mouseup)='mouseUp($event)' (mouseout)='mouseLeave()' #ndcanvas></canvas>\n    <span (click)=\"ndClearCanvas()\" class=\"close warp\"></span>\n</div>`,\n  styles: [`.nd-canvas{border:1px solid #000}.nd-container{position:relative}.nd-cancel-button{top:2px;right:0;position:absolute}.close{cursor:pointer;display:inline-block;width:20px;height:20px;overflow:hidden;border:1px solid #000;top:2px;right:0;position:absolute}.close:hover::after,.close:hover::before{background:red}.close::after,.close::before{content:'';position:absolute;height:2px;width:100%;top:50%;left:0;margin-top:-1px;background:#000}.close::before{-webkit-transform:rotate(45deg);transform:rotate(45deg)}.close::after{-webkit-transform:rotate(-45deg);transform:rotate(-45deg)}`]\n})\nexport class NdEzSignitureComponent implements OnInit {\n  @ViewChild('ndcanvas') public canvas;\n  @ViewChild('ndContainer') public ndContainer;\n\n  @Input() public width: number = 200;\n  @Input() public height: number = 200;\n  @Input() public ndStrokeColor: string = '#000';\n  @Input() public ndLineWidth: number = 3;\n  @Output() public dataSigniture = new EventEmitter();\n\n  canvasElement: any;\n  lastX: number;\n  lastY: number;\n  mouseIsDown: boolean = false;\n  blankCanvas: any = document.createElement('canvas');\n  dataReturn: any = {\n    isEmptyCanvas: true,\n    image: null\n  }\n\n  constructor(public renderer: Renderer2) { }\n\n  ngOnInit() {\n\n  }\n  public ngAfterViewInit() {\n    this.canvasElement = this.canvas.nativeElement;\n    this.renderer.setAttribute(this.canvasElement, 'width', this.width + 'px');\n    this.renderer.setAttribute(this.canvasElement, 'height', this.height + 'px');\n    this.renderer.setAttribute(this.ndContainer.nativeElement, 'style', 'width:' + this.width + 'px');\n    this.blankCanvas.height = this.height;\n    this.blankCanvas.width = this.width;\n\n  }\n  ngAfterContentInit() {\n    this.dataSigniture.emit(this.dataReturn);\n  }\n  mouseUp(ev) {\n    this.mouseIsDown = false;\n    this.ndGetDataSigniture();\n  }\n  mouseDown(ev) {\n    this.mouseIsDown = true;\n    this.lastX = ev.layerX;\n    this.lastY = ev.layerY;\n  }\n  mouseMove(ev) {\n    let ctx = this.canvasElement.getContext(\"2d\");\n    if (this.mouseIsDown) {\n      ctx.beginPath();\n      ctx.moveTo(this.lastX, this.lastY);\n      ctx.lineTo(ev.layerX, ev.layerY);\n      ctx.closePath();\n      ctx.strokeStyle = this.ndStrokeColor;\n      ctx.lineWidth = this.ndLineWidth;\n      ctx.stroke();\n      this.lastX = ev.layerX;\n      this.lastY = ev.layerY;\n    }\n  }\n  mouseLeave() {\n    this.mouseIsDown = false;\n    this.ndGetDataSigniture();\n  }\n  ndClearCanvas() {\n    this.canvasElement.getContext(\"2d\").clearRect(0, 0, this.height, this.width);\n    this.ndGetDataSigniture();\n  }\n  ndGetDataSigniture() {\n    this.dataReturn.isEmptyCanvas = this.canvasElement.toDataURL() == this.blankCanvas.toDataURL();\n    this.dataReturn.image = this.canvasElement.toDataURL();\n    this.dataSigniture.emit(this.dataReturn);\n  }\n\n}\n\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { NdEzSignitureComponent } from './nd-ez-signiture.component';\n\n@NgModule({\n  imports: [\n    CommonModule\n  ],\n  declarations: [NdEzSignitureComponent],\n  exports: [\n    NdEzSignitureComponent \n  ]\n})\nexport class NdEzSignitureModule { }\n"]}